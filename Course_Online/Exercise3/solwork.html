<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Lesson 7 Application Project</title>

<script language="javascript">

    function validate(form) {
    	
    	// First, get all the values from the form  
        var cardType = form.ccard.value;
        var cardNumber = form.number.value;
        var cardMonth = form.expMo.value;
        var cardYear = form.expYr.value;
        
        //alert(cardType+':'+cardNumber+':'+cardMonth+':'+cardYear)
        
        // We'll compare the date to "now"
        var now = new Date();
        var nowMonth = now.getMonth();
        var nowYear = now.getFullYear();
        
        //alert(nowMonth+":"+nowYear);
        
        if (cardNumber=='') {
            alert('Please enter a card number.');
            return;
        }
        
        if (cardType=='visa') {
            // Visa card numbers always begin with the numeral 4 and use 16 digits.      
            if(cardNumber.charAt(0)!=4 || cardNumber.length!=16) {
                alert('Invalid Visa card. Please try again.');
                return;
            }
        } else if(cardType=='mc') {
            // MasterCard numbers always begin with the numeral 5 and use 16 digits.
            if(cardNumber.charAt(0)!=5 || cardNumber.length!=16) {
                alert('Invalid MasterCard card. Please try again.');
                return;
            }
        } else if(cardType=='amex') {
            // American Express card numbers always begin with the numeral 3 and use 15
            if(cardNumber.charAt(0)!=3 || cardNumber.length!=15) {
                alert('Invalid AmericanExpress card. Please try again.');
                return;
            }       
        } else {
            alert('You did not select a card');
            return
        }
        
        // Check the date
        
        if (cardYear<nowYear) {
            // If the years are different, the month doesn't matter.
            // Of course, if previous years are not in the list then this
            // check can be left out.
            alert('Card date has expired. Please use a different card.');
            return;
        }   
        if (cardYear==nowYear && cardMonth<nowMonth) {
            // If the years are the same, we have to check the month.
            alert('Card date has expired. Please use a different card.');
            return;
        }
        
        alert('Everything is OK');
        
    }


</script>

</head>

<body>

<h3>CIW JavaScript Specialist</h3>
<hr />
<form name="ccForm">
<p>
<input type="radio" name="ccard" value="visa" />
Visa
</p>
<p>
<input type="radio" name="ccard" value="mc" />
MasterCard
</p>
<p>
<input type="radio" name="ccard" value="amex" />
American Express
</p>
<p>
Card # 
<input type="text" name="number" />
</p>
<p>
Exp Date: 
<select name="expMo">
<option value=0>Jan
<option value=1>Feb
<option value=2>Mar
<option value=3>Apr
<option value=4>May
<option value=5>Jun
<option value=6>Jul
<option value=7>Aug
<option value=8>Sep
<option value=9>Oct
<option value=10>Nov
<option value=11>Dec
</select> 
<select name="expYr">
<option value=2020>2020
<option value=2021>2021
<option value=2022>2022
<option value=2023>2023
<option value=2024>2024
<option value=2025>2025
<option value=2026>2026
<option value=2027>2027
</select>
</p>

<input type="button" value="Check Form" onClick="validate(this.form);" />
<input type="reset" value="Reset Form" />
</form>

</body>
</html>
